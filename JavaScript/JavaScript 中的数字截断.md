# JavaScript ä¸­çš„æ•°å­—æˆªæ–­

ES6 å¼•å…¥çš„ `Math.trunc()` æ–¹æ³•ç”¨äºæˆªæ–­æµ®ç‚¹æ•°å¹¶è¿”å›å…¶æ•´æ•°éƒ¨åˆ†ã€‚æ­¤å‡½æ•°ä¸è¿›è¡Œä»»ä½•èˆå…¥ï¼Œå®ƒåªæ˜¯åˆ é™¤å°æ•°ç‚¹åçš„æ‰€æœ‰æ•°å­—ã€‚

```js
const number = 100.6

// æ—§æ–¹æ³•
number < 0 ? Math.ceil(number) : Math.floor(number) // 100

// ES6 æ–¹æ³•
const es6 = Math.trunc(number) // 100
```

`Math.trunc()` çš„è¿è¡Œæ–¹å¼å¾ˆç®€å•ï¼Œå®ƒåªæ˜¯æˆªæ–­å…¶å³è¾¹çš„ç‚¹å’Œæ•°å­—ã€‚ä¸ç®¡å‚æ•°æ˜¯æ­£æ•°è¿˜æ˜¯è´Ÿæ•°ã€‚

```js
Math.trunc(100.1) // 100
Math.trunc(100.12) // 100
Math.trunc(100.123) // 100

Math.trunc(-100.1) // -100
```

æˆ‘ä»¬æ¥çœ‹ä¸€äº›éæ•°å­—å‚æ•°çš„ä¾‹å­ï¼š

```js
Math.trunc('100.1') // 100
Math.trunc('hello') // NaN
Math.trunc(NaN) // NaN
Math.trunc(undefined) // NaN
Math.trunc() // NaN
```

## ä½¿ç”¨ `parseInt` è¿›è¡Œæ•°å­—æˆªæ–­

æˆ‘ä»¬ä½¿ç”¨ `parseInt` ä¹Ÿå¯ä»¥å¾—åˆ°ç±»ä¼¼çš„ç»“æœï¼š

```js
parseInt(100.1) // 100
parseInt(-100.1) // -100

parseInt('100.1') // 100
parseInt('hello') // NaN
parseInt(undefined) // NaN
parseInt() // NaN
```

### `Math.trunc()` å’Œ `parseInt()` é€‰æ‹©

`parseInt` ä¸»è¦ç”¨äºå­—ç¬¦ä¸²å‚æ•°ã€‚æ‰€ä»¥å¦‚æœä½ åœ¨å¤„ç†æ•°å­—ï¼Œæœ€å¥½ä½¿ç”¨ `Math.trunc()`ã€‚

### ä½¿ç”¨ `parseInt` çš„é—®é¢˜

ä½¿ç”¨ `parseInt` æ—¶å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ã€‚å½“æ‚¨ä¼ å…¥ä¸€ä¸ªä¸æ˜¯å­—ç¬¦ä¸²çš„å‚æ•°ï¼ˆåœ¨æœ¬ä¾‹ä¸­æ˜¯æ•°å­—ï¼‰æ—¶ï¼Œå®ƒå°†é¦–å…ˆä½¿ç”¨ `toString()` æŠ½è±¡æ“ä½œå°†å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ`parseInt` å¾ˆå¥½ã€‚ä½†è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå¯èƒ½ä¸æ˜¯è¿™æ ·çš„ä¾‹å­ã€‚

```js
const number = 1000000000000000000000.5

console.log(parseInt(number)) // 1 <-- ğŸ˜±
```

ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Ÿ

è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„å‚æ•°ä¸æ˜¯ `string`ï¼Œæ‰€ä»¥ `parseInt` åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å°†å‚æ•°è½¬æ¢ä¸º `string`ã€‚

```js
const number = 1000000000000000000000.5

console.log(number.toString()) // "1e+21"
```

æ‰€ä»¥å½“å®ƒè¯•å›¾ä» `1e+21` ä¸­è·å–æ•´æ•°æ—¶ï¼Œå®ƒåªçŸ¥é“è·å– `1` å€¼ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨ `parseInt` è‚¯å®šæœ‰å…¶é“ç†ã€‚ç”±äºè¿™ç§è¾¹ç¼˜æƒ…å†µï¼Œæ‚¨å¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨ `Math` å‡½æ•°ã€‚

## æµè§ˆå™¨æ”¯æŒ

å¤§å¤šæ•°ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ [`Math.trunc()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc#Browser_compatibility)ã€‚é™¤äº† Internet Explorerã€‚ä»¥ä¸‹æ˜¯ `Math.trunc()` çš„æ”¯æŒæƒ…å†µï¼š

![Math.trunc()](https://upload-images.jianshu.io/upload_images/18281896-5ede8f5d937f2ea1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

å¦‚æœæ‚¨éœ€è¦å¯¹æ—§æµè§ˆå™¨çš„æ”¯æŒï¼Œè¯·ä½¿ç”¨æ—§æ–¹æ³•ã€‚

## å…¶ä»–è§£å†³æ–¹æ¡ˆ

### ä½è¿ç®—ç¬¦

**åŒä½é `~~`** â€”â€” ç”¨äºå»æ‰å°æ•°éƒ¨åˆ†ï¼Œå› ä¸ºä½è¿ç®—çš„æ“ä½œå€¼è¦æ±‚æ˜¯æ•´æ•°ï¼Œå…¶ç»“æœä¹Ÿæ˜¯æ•´æ•°ï¼Œæ‰€ä»¥ç»è¿‡ä½è¿ç®—çš„éƒ½ä¼šè‡ªåŠ¨å˜æˆæ•´æ•°ã€‚

```js
console.log(~~100.6) // 100
```

ä¸€ä¸ª `~` æ˜¯æŒ‰ä½å–åè¿ç®—ï¼Œä¸¤ä¸ª `~~` ä¹Ÿå°±æ˜¯å–åä¸¤æ¬¡ã€‚

**æŒ‰ä½æˆ– `|`** â€”â€” åœ¨æ¯ä¸ªä½ä½ç½®è¿”å› 1ï¼Œå…¶ä¸­ä¸€ä¸ªæˆ–ä¸¤ä¸ªäºŒè¿›åˆ¶æ“ä½œæ•°çš„å¯¹åº”ä½ä¸º 1ã€‚

```js
console.log(100.6 | 0) // 100
```

> è¯¦ç»†æ¢ç®—å¯æŸ¥çœ‹ MDNï¼š[Bitwise OR (|)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_OR)

### Number.prototype.toFixed()

`Number.prototype.toFixed()` æ–¹æ³•ä½¿ç”¨å®šç‚¹è¡¨ç¤ºæ³•æ¥æ ¼å¼åŒ–ä¸€ä¸ªæ•°å€¼ï¼Œå…è®¸æ‚¨æ§åˆ¶å°æ•°

```js
;(100.645).toFixed() // "100"

// æ­¤æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æˆ‘ä»¬å¯ä»¥å†æ¬¡å°†å…¶è½¬æ¢ä¸ºæ•°å­—ï¼š
Number((100.645).toFixed()) // 100
```
